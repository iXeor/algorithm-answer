# Leetcode 458. 可怜的小猪
### 解题思路
#### 什么是香农熵？
1948 年，香农提出了“信息熵”的概念，解决了对信息的量化度量问题。
一条信息的信息量大小和它的不确定性有直接的关系。比如说，我们要搞清楚一件非常非常不确定的事，或是我们一无所知的事情，就需要了解大量的信息。相反，如果我们对某件事已经有了较多的了解，我们不需要太多的信息就能把它搞清楚。所以，从这个角度，我们可以认为，信息量的度量就等于不确定性的多少。
公式如下：
$$H(x) = -\sum_{i=1}^{n}p(x_i)log_b(p(x_i))$$
#### 情况考虑：
假设不限制时间，只用一只可以无限复活的猪坚强去验证`buckets`个桶里那一个有***的，它的熵是多少？

每个桶都只有两个状态，对吧？要么**有毒**，要么**无毒**。假设有毒是`1`，无毒是`0`，那么每个桶有毒的概率便是 $\frac{1}{buckets}$。
将它带入公式，$b$取2（因为目前状态只有死和活两种），得到：
$$H(x) = -\sum_{i=1}^{buckets}\frac{1}{buckets}log_2(\frac{1}{buckets}) = -\sum_{i=1}^{buckets}\frac{1}{buckets} \cdot -log_2({buckets}) = log_2(buckets)$$
也就是说，假设用一只可以无限复活的猪坚强去找到有***的桶需要尝试$log_2(buckets)$次。
相对的，如果有$log_2(buckets)$只猪坚强，只需要试一次。
那么如果我取了n只可以无限复活的猪坚强会变成什么样呢？它们的状态大致如下表所示：

|存活为1死亡为0|猪坚强1号|猪坚强2号|猪坚强3号|猪坚强4号|猪坚强5号|...|猪坚强n号|
| :----: | :----: | :----: |:----: | :----: |:----: | :----: | :----: |
||1|1|1|1|1|...|1
||0|1|1|1|1|...|1
||1|0|1|1|1|...|1
|......|
||1|1|1|1|1|...|0

其中，有一只猪坚强死亡的状态有n种，没有猪坚强死亡的状态有1种。有人可能会问：啊，为什么就不能同时毒死多只猪坚强？别忘了，我们的***只有一个桶里有，试到了就不会再试了。如果都试过猪坚强全部存活（没用复活技能的情况下），那有毒的桶就在剩下的那些桶里。这个时候，我们的公式发生了些许变化：**我们的$b$，别忘了，它是表示状态的，这时候应该是$b = n+1$**
那么我们再次把它带入公式，得到：
$$H(x) = -\sum_{i=1}^{buckets}\frac{1}{buckets}log_b(\frac{1}{buckets}) \\~~~~~~~~~~~~~~ = -\sum_{i=1}^{buckets}\frac{1}{buckets} \cdot -log_b({buckets}) \\~~~~~~~~~~~~~ = log_b(buckets)~~~~~~~(其中b = n+1) $$
也就是说，我需要用n只猪坚强做$log_b(buckets)$次实验才能确定哪个桶里有毒，相对的，如果我有$log_b(buckets)$只猪坚强，我需要做n次实验。
但是呢，我们题干里给了限定时间，猪坚强们也是不能复活的，那么这个实验的死一个猪坚强的状态次数便由测试时间`minutesToTest`和猪坚强们从喝下桶里的奇妙小饮料到死亡的时间`minutesToDie`决定。在单位时间内，用最少的猪坚强试出**带毒的桶**。我们同样可以利用上面的方法去估算到底需要多少只猪坚强才能完成实验。我想这时候还应该简单介绍一下换底公式：
$$log_ab = \frac{logb}{loga}$$
那么我们现在的状态数固定，对吧，$b = n+1$已知，一只猪坚强最多试$log_b(buckets)$次，假设现在需要$pigs$只猪坚强，一遍就要试出来结果。
那我们的式子应该是这样的：
$$
pigs = log_b(buckets)
\\pigs = \frac{log(buckets)}{log(b)}
$$
### 代码
求$pigs$就完了。
```c
int poorPigs(int buckets, int minutesToDie, int minutesToTest){
    int base = minutesToTest / minutesToDie + 1;
    int pigs = ceil(log(buckets)/log(base));
    return pigs;
}
```
